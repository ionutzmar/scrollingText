#include <stdlib.h>
#include <stdio.h>
#include <wiringPi.h>

int cols[11] = { 23, 22, 21, 29, 28, 27, 26, 1, 4, 5, 6};
int rows[6] = {24, 25, 3, 2, 0, 7};
float speed = 0.1; //in seconds // scrolling speed
float elapsed;



/* This program is hard-coded. It is useless but I keep it because it is my first scrolling text program. Check the other program written in python.*/



int a[24] = {
	0, 1, 1, 0,
	1, 0, 0, 1,
	1, 1, 1, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1
};
int b[24] = {
	1, 1, 1, 0,
	1, 0, 0, 1,
	1, 1, 1, 0,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 1, 1, 0
};
int c[24] = {
	0, 1, 1, 1,
	1, 0, 0, 0,
	1, 0, 0, 0,
	1, 0, 0, 0,
	1, 0, 0, 0,
	0, 1, 1, 1
};
int d[24] = {
	1, 1, 1, 0,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 1, 1, 0
};
int e[24] = {
	1, 1, 1, 1,
	1, 0, 0, 0,
	1, 0, 0, 0,
	1, 1, 1, 1,
	1, 0, 0, 0,
	1, 1, 1, 1
};
int o[24] = {
	0, 1, 1, 0,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	0, 1, 1, 0
};
int n[24] = {
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 1, 0, 1,
	1, 0, 1, 1,
	1, 0, 0, 1,
	1, 0, 0, 1
};
int r[24] = {
	1, 1, 1, 0,
	1, 0, 0, 1,
	1, 1, 1, 0,
	1, 1, 0, 0,
	1, 0, 1, 0,
	1, 0, 0, 1
};

int p[24] = {
	1, 1, 1, 0,
	1, 0, 0, 1,
	1, 1, 1, 0,
	1, 0, 0, 0,
	1, 0, 0, 0,
	1, 0, 0, 0
};

int t[24] = {
	1, 1, 1, 1,
	0, 0, 1, 0,
	0, 0, 1, 0,
	0, 0, 1, 0,
	0, 0, 1, 0,
	0, 0, 1, 0,
};
int u[24] = {
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	1, 0, 0, 1,
	0, 1, 1, 0

};

int display[66];

void setLeds()
{
	int i;
	for (i = 0; i < 6; i++)
	{
		pinMode(rows[i], OUTPUT);
	}
	for (i = 0; i < 11; i++)
	{
		pinMode(cols[i], OUTPUT);
	}
}


int main(int argc, char *argv[])
{
	wiringPiSetup();
	setLeds();

	int startIndex = 0;
	int finishIndex = 11;
	int i, j;
	elapsed = 0;

	//int *all = malloc(argc * sizeof(int) * 24);
	int nbr[432] = {
		1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0,
		1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
		1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0,
		1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0,
		1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
		1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0
	};
	while (1)
	{
		
		for (j = 0; j < 6; j++)
		{
			for (i = 0; i < 11; i++)
			{
				if (nbr[i + startIndex + j * 72] == 1)
				{
					digitalWrite(cols[i], HIGH);
					digitalWrite(rows[j], HIGH);
					delay(1);
					digitalWrite(cols[i], LOW);
					digitalWrite(rows[j], LOW);
				}
				if ((float)millis() - elapsed > speed * 1000)
				{
					elapsed += speed * 1000;
					printf("Tick %f\n", elapsed);
					if (startIndex == 61)
					{
						startIndex = 0;
						j = 0;
						i = 0;
					}
					else
						startIndex++;

				}
			}
		}
		//printf("%d\n",millis());
		
	}
}
